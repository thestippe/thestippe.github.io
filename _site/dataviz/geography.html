<!DOCTYPE html>
<html lang="en"><head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W9G73E5P44"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-W9G73E5P44');
</script>
          <link rel="icon" 
                type="image/png" 
                href="/docs/assets/images/dp_icon.png">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Drawing geographic maps | Data Perspectives</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Drawing geographic maps" />
<meta name="author" content="Data-perspectives" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Dealing with geographic data" />
<meta property="og:description" content="Dealing with geographic data" />
<link rel="canonical" href="http://localhost:4000/dataviz/geography" />
<meta property="og:url" content="http://localhost:4000/dataviz/geography" />
<meta property="og:site_name" content="Data Perspectives" />
<meta property="og:image" content="http://localhost:4000/docs/assets/images/geo/geo.webp" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-10-27T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/docs/assets/images/geo/geo.webp" />
<meta property="twitter:title" content="Drawing geographic maps" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Data-perspectives"},"dateModified":"2023-10-27T00:00:00+00:00","datePublished":"2023-10-27T00:00:00+00:00","description":"Dealing with geographic data","headline":"Drawing geographic maps","image":"http://localhost:4000/docs/assets/images/geo/geo.webp","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/dataviz/geography"},"url":"http://localhost:4000/dataviz/geography"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Data Perspectives" />


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>


<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
</script>
<a rel="me" href="https://vis.social/@thestippe" style="display: none;">Mastodon</a>
<link rel="manifest" href="manifest.json">
</head>
<body>

        <div id='upperBar'><header class="site-header">

        <div id='upperBarr'>
        <script src="https://d3js.org/d3.v7.js"></script>
                <div class="wrapper" style="display:flex;">

                
                
                
                  
                    
                    
                    
                    
                    

        <ul hidden='hidden' id="postList"><li>
                        Poisson regression;/statistics/poisson_regression;1
                </li><li>
                        Logistic regression;/statistics/logistic_regression;2
                </li><li>
                        Robust linear regression;/statistics/robust_regression;3
                </li><li>
                        Multi-linear regression;/statistics/multivariate_regression;4
                </li><li>
                        Linear regression with binary input;/statistics/regression_binary_input;5
                </li><li>
                        Horseshoe priors;/statistics/horseshoe;6
                </li><li>
                        Introduction to the linear regression;/statistics/regression;7
                </li><li>
                        MRP;/statistics/mrp;8
                </li><li>
                        Model comparison, cont.;/statistics/model_averaging_cont;9
                </li><li>
                        Model comparison;/statistics/model_averaging;10
                </li><li>
                        Application of the Lotka-Volterra model;/statistics/lotka_volterra;11
                </li><li>
                        Differential equations;/statistics/ode;12
                </li><li>
                        Introduction to GIS;/gis/gis_intro;13
                </li><li>
                        Re-parametrizing your model;/statistics/reparametrization;14
                </li><li>
                        Predictive checks;/statistics/predictive_checks;15
                </li><li>
                        Trace inspection;/statistics/trace_inspection;16
                </li><li>
                        Introduction to the Bayesian workflow;/statistics/bayesian_workflow;17
                </li><li>
                        Mixture models;/statistics/mixture;18
                </li><li>
                        Multidimensional distributions;/statistics/categories;19
                </li><li>
                        Dirichlet Process Mixture Models;/statistics/dp;20
                </li><li>
                        The Gaussian model;/statistics/reals;21
                </li><li>
                        Bayesian Additive Regression Trees;/statistics/bart;22
                </li><li>
                        Bonus: counting animals in a park;/statistics/hypergeom;23
                </li><li>
                        Splines;/statistics/spline;24
                </li><li>
                        The Negative Binomial model;/statistics/negbin;25
                </li><li>
                        Gaussian processes regression;/statistics/gp_example;26
                </li><li>
                        Gaussian processes;/statistics/gp;27
                </li><li>
                        The Poisson model;/statistics/poisson;28
                </li><li>
                        Nonparametric models;/statistics/nonparametric_intro;29
                </li><li>
                        The Beta-Binomial model;/statistics/betabin;30
                </li><li>
                        Structural time series;/statistics/structural_time_series;31
                </li><li>
                        Time series;/statistics/time_series;32
                </li><li>
                        Some notation about probability;/statistics/probability_reminder;33
                </li><li>
                        Synthetic control;/statistics/synthetic_control;34
                </li><li>
                        How does MCMC works;/statistics/mcmc_intro;35
                </li><li>
                        Regression discontinuity design;/statistics/rdd;36
                </li><li>
                        Introduction to Bayesian inference;/statistics/bayes_intro;37
                </li><li>
                        An overview to statistics;/statistics/preface;38
                </li><li>
                        Difference in difference;/statistics/difference_in_differences;39
                </li><li>
                        Instrumental variable regression;/statistics/instrumental_variable;40
                </li><li>
                        Randomized controlled trials;/statistics/randomized;41
                </li><li>
                        Causal inference and Bayesian networks;/statistics/causal_intro_2;42
                </li><li>
                        Causal inference;/statistics/causal_intro;43
                </li><li>
                        Experiment analysis with many blocking variables;/statistics/experiment_design_cont;44
                </li><li>
                        Experiment analysis;/statistics/experiment_design;45
                </li><li>
                        Introduction to Extreme Values theory;/statistics/extreme_intro;46
                </li><li>
                        Application of survival analysis with discrete times;/statistics/survival_example_2;47
                </li><li>
                        Application of survival analysis 1;/statistics/survival_example;48
                </li><li>
                        Introduction to survival analysis;/statistics/survival_analysis;49
                </li><li>
                        Random models and mixed models;/statistics/random_models;50
                </li><li>
                        Hierarchical models and meta-analysis;/statistics/hierarchical_metaanalysis;51
                </li><li>
                        Hierarchical models;/statistics/hierarchical_models;52
                </li><li>
                        Drawing geographic maps;/dataviz/geography;53
                </li><li>
                        The Gestalt principles;/dataviz/gestalt;54
                </li><li>
                        Design tricks;/dataviz/design-introduction;55
                </li><li>
                        How to choose a color map;/dataviz/palettes-introduction;56
                </li><li>
                        Introduction to color perception;/dataviz/color-introduction;57
                </li><li>
                        Drawing is redrawing;/dataviz/gender-economist;58
                </li><li>
                        Visual queries;/dataviz/visual-queries;59
                </li><li>
                        Channel effectiveness;/dataviz/effectiveness;60
                </li><li>
                        Evolutions of the line chart;/dataviz/linechart-evolution;61
                </li><li>
                        Beyond the 1D scatterplot;/dataviz/scatterplot-evolution;62
                </li><li>
                        Perception;/dataviz/perception;63
                </li><li>
                        Fundamental charts;/dataviz/fundamental-charts;64
                </li><li>
                        Marks and channels;/dataviz/marks-channels;65
                </li><li>
                        Data abstraction;/dataviz/data-types;66
                </li><li>
                        Data visualization;/dataviz/dataviz;67
                </li><li>
                        Section introduction;/statistics/simple_models_intro;68
                </li></ul>
                        <div style="display:flex">
                  <a href="/dataviz/gestalt" class="prev">&#8249;</a>
                  
                                <a href="/"><img class="site-masthead" src="/docs/assets/images/logo_dp.png" alt="Data Perspectives" id="logo" /></a><div id='searchNav' style="flex;">
                                        <input type="search" id="search_0" class="searchBar" onkeydown="searchText()" placeholder="Search">
                                </div>

                                <div hidden='hidden' id="search_focus">0</div>



                        </div><nav class="site-nav" style="display:flex;">
                                <input type="checkbox" id="nav-trigger" class="nav-trigger" />
                                <label for="nav-trigger">
                                        <span class="menu-icon">
                                                <svg viewBox="0 0 18 15" width="18px" height="15px">
                                                        <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
                                                </svg>
                                        </span>
                                </label>

                                <div class="trigger"><a  class="page-link" href="/about">About me</a><a  class="page-link" href="/links">Resources</a>
                                <a href="/dataviz/" class="page-link">Up</a>
                                
                                </div>
                        </nav>
        </div>


        <script src="/docs/assets/javascript/search.js">
        </script>
                </div>

</header>
<div class="progress-container">
    <div class="progress-bar" id="myBar"></div>
    </div>
        </div>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
          <div id='topPage'></div>
        <a href='/index'>
<img src="/docs/assets/images/background_resized.webp" alt="backround" style="margin:auto;display:block;width:1200px">

</a>
    <h1 class="post-title p-name" itemprop="name headline">Drawing geographic maps</h1>
    <p class="post-meta"><time class="dt-published" datetime="2023-10-27T00:00:00+00:00" itemprop="datePublished">
        Oct 27, 2023
      </time></p>
    <p class="post-meta"> Reading time: <span class="reading-time" title="Estimated read time">
  
  8&prime;
</span>
</p>
  </header>
  <br>

  <div class="post-content e-content" itemprop="articleBody">
    <p>As defined by Enrico Bertini, geographical maps are visualizations
where non-geographical objects are visualized, and some geographical entities
are used to provide some spatial reference to the reader.
Here we define a geographical entity as any kind of entity which encodes
geographical information.
These are:</p>
<ul>
  <li><strong>Points</strong> such as latitude and longitude, and give information about the location of a single entity.</li>
  <li><strong>Lines</strong> as might be the location of a street or of a river.</li>
  <li><strong>Areas</strong> which gives the location of a geographically extended object, such as a state or of a building.</li>
</ul>

<p>Associating to a non-geographical entity a geographical property
is named <strong>geo-encoding</strong>, while the extraction of some non-geographical
information given the geographical location is said <strong>geo-decoding</strong>.</p>

<p>There is quite a lot of agreement that, unless strictly needed, geographical
maps are not effective for data visualization.
The reason for this is quite easy to guess, and it’s simply because length
can hardly be used, since the spatial channels are already encoding
the geographical information.
There are, however, cases where one simply cannot avoid using geographical maps.</p>

<h2 id="idealizing-the-earth">Idealizing the Earth</h2>

<p>The Earth is an object with its own shape, but our aim is to map its
surface onto a plane, and to do so we must start from a geometrical
model of the Earth.
The first thing we must do is to define what do we mean by Earth
surface, and by this we mean the mean sea level.</p>

<p>The simplest model is of course the perfect sphere, but this is often
considered as a too simplistic model, since it does not take
into account the Earth deformation due to its rotation around the pole axis.</p>

<p>The model which is nowadays most common is the World Geodetic System 1984,
also known as WGS84 or EPSG:4326, where the mean seal level is
defined as an ellipsoid
having a semi-major axis of 6378.137 kilometers
and a semi-minor axis of approximately 6356.752 kilometers.</p>

<h2 id="latitude-and-longitude">Latitude and longitude</h2>
<p>Let us now recall how latitude and longitude,
which are the most common coordinates on both the spherical and on the ellipsoidal Earth, are defined.
This will be easier if we first define the <strong>great circle</strong>,
which is any circle given by the intersection
of the sphere (the Earth) with a plane going through the center of the sphere.</p>

<p>Great circles are very useful, as the shortest path between two points on
the sphere is an arc of great circle<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>.</p>

<p>We must then define a <strong>pole</strong>, as an example the North Pole (the South Pole can be 
defined as the opposite point on the sphere).
We then define the <strong>equator</strong> as the great circle with the greatest distance
from the poles or, equivalently, as the great circle defined by the plane 
perpendicular to the line passing through the poles.</p>

<p>The <strong>north/south hemisphere</strong> is the surface of the half sphere which has as boundary the equator
and encloses the North/South Pole</p>

<p>A <strong>parallel</strong> is any circle on the sphere given by the intersection
of the sphere with a plane perpendicular to the line passing through the poles.
The equator is the only parallel which is also a great circle.</p>

<p>We define <strong>meridians</strong> as the great circles passing through both the poles.</p>

<p><img src="/docs/assets/images/geo/sphere.webp" alt="" /></p>

<p>In the above figure we show the meridians and parallels on the sphere, in grey.
All meridians encounter at the poles, parallels never encounters.
The red dashed line correspond to the equator, the purple dashed line to the Greenwich meridian.
The dotted red line is the parallel passing through the black point,
the dotted purple line corresponds to the meridian passing through it.
The red solid arc corresponds to the point longitude,
the purple solid arc corresponds to its latitude.</p>

<p>We must now identify a second great circle passing through both the poles,
and this is conventionally defined as the one going through Greenwich.</p>

<p>We can now define the <strong>latitude</strong> $\phi$ of a point as the shortest arc of meridian 
going from the equator and the parallel passing through the point.
If a point is in the north/south hemisphere, then its latitude is positive/negative (N/S).</p>

<p>The <strong>longitude</strong> $\lambda$ is the shortest arc of equator going from the Greenwich meridian
and the meridian passing through the point.
The longitude is positive (East) if, by looking from the North Pole,
the shortest arc starting from Greenwich rotates anticlockwise,
otherwise it’s negative (West).</p>

<h2 id="maps-and-projections">Maps and projections</h2>
<p>Earth is (almost) spherical, but our screen is flat, so we need to use a
<strong>projection</strong> to map the points on the sphere onto the plane.</p>

<p>The simplest kind of projection we will discuss is the <strong>perspective projection</strong>,
which is obtained by projecting the rays originated by 
a dummy light source going through the sphere surface onto
a plane.</p>

<p>In order to define a projection, we must define</p>
<ul>
  <li>a projection point, which is the light source</li>
  <li>the surface where we will project the sphere</li>
</ul>

<p>Common projection points are:</p>
<ul>
  <li>the center of the sphere (central)</li>
  <li>a point onto the sphere - usually a pole</li>
  <li>a point located at infinite distance from the sphere and the rays are parallel lines (orthographic)</li>
</ul>

<p><img src="/docs/assets/images/geo/projection_points.webp" alt="" /></p>

<p>We must also choose the plane where we want to project the sphere.
Common choices are</p>
<ul>
  <li>a plane tangent to a point, usually the pole (planar)</li>
  <li>a cone tangent to any given circle, usually parallel (conic)</li>
  <li>a cylinder tangent to any great circle, usually the equator (cylindrical)</li>
</ul>

<p>Planar and cylindrical projections can be considered special cases of
the conical one.</p>

<p>In any polar projection, parallels are mapped onto circles,
while meridians are straight lines starting from the pole.</p>

<p>Some common projections are:</p>
<ul>
  <li>the <strong>gnomonic</strong>, the planar perspective projection where the rays start from the center of the sphere</li>
  <li>the <strong>stereographic</strong> projection, the planar perspective projection where the rays start from the point opposite to the point of the sphere tangent to the projection plane</li>
  <li>the <strong>orthographic</strong> projection, the planar perspective projection where the rays are parallel</li>
  <li>the <strong>central cylindrical</strong> projection</li>
</ul>

<p>Here we show how equidistant parallels and meridians are mapped for the above projections</p>

<p><img src="/docs/assets/images/geo/polar_planar_projections.webp" alt="" /></p>

<p>It is sometimes useful to use a secant plane rather than a tangent one, but here
we only focus on tangent projections.</p>

<p>Each projection has pros and cons, as usual.
As an example, in the gnomonic projection, arcs of great circles are always
mapped onto straight lines, making them convenient to trace routes. However,
in this projection, distances and areas are distorted,
and the more one goes far from the center of the projection
(where we assume the plane touches the sphere), the worst 
becomes the distortion.</p>

<p>On the other hand, the central cylindrical projection is well suited to show
regions close to the equator, but the poles are mapped at the infinity.</p>

<p>Finally, the stereographic projection is a <strong>conformal</strong> projection,
and this means that angles are locally preserved in the mapping, so
shapes are preserved too. This makes them
suitable to calculate angle differences.</p>

<p>Conformal projections form a very important class of projections, and the stereographic
projection is only one of these projections.
Other well known examples of conformal projections are the
<strong>Mercator</strong> projection, which is a conformal projection derived from
the cylindrical projection, and the <strong>Lambert conical</strong> projection, which is instead derived
from the central conical projection.</p>

<p><img src="/docs/assets/images/geo/south_pole_conformal.webp" alt="" /></p>

<p>In the above figure we show how the South Pole, in blue, is mapped for different
conformal maps.</p>

<p>Another very important class of projection is the family of <strong>equal-area</strong>
projections. In equal-area projections, the ratio between areas is preserved.</p>

<p><img src="/docs/assets/images/geo/south_pole_equal_area.webp" alt="" /></p>

<p>Due to this property, equal area projections are often used in statistics,
where one wants to compare quantities for different countries and relate
these quantities to the extension of the country itself.
Above, we show some example of equal-area projection, namely the <strong>Lambert conical</strong>,
the <strong>Equal Earth</strong> and the <strong>Hammer</strong> projections.</p>

<p>We finally mention the <strong>equidistant</strong> projections, which preserve
some distance, usually distances from one point or along one axis.
As an example, the <strong>equirectangular</strong> projection preserves the distances
along meridians, while the <strong>azimuthal equidistant projection</strong> preserves
distances from the central point.
Another equidistant projection you might easily encounter is the
<strong>equidistant conic</strong> projection, which both preserves distances along
meridians and along the two standard parallels (in the figure 0 and -40 degrees).
The equidistant projection having as standard parallel the equator
is also known as <strong>plate carrée</strong>.</p>

<p><img src="/docs/assets/images/geo/south_pole_equidistant.webp" alt="" /></p>

<p>This class of projections can be useful when you need to precisely map
distances, and are therefore often used when analyzing routes.</p>

<h2 id="conclusions">Conclusions</h2>

<p>Choosing the appropriate projection is crucial to convey the most relevant information,
especially when you need to visualize large geographical areas.
There exists no perfect projection, and each projection has pros and cons,
it is therefore important both to have some basic repertoire of projections
and to experiment with different projections.
As usual, drawing is re-drawing.</p>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>This is why, for long distances, it is convenient to work with nautical miles, which are defined as the length of one prime of degree of the great circle. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

  </div><a class="u-url" href="/dataviz/geography" hidden></a>

  <br>
  <div id='autograph'>
          Stippe Oct 27, 2023

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>


  <div class="wrapper">
          <div class='footer-text'>
                  Opinions are mine, mistakes too, and if you find any feel free to report it via mail or via Twitter.
                  <br>
                  Most of the material in the statistics section is an adaptation to Python of some pre-existing model.
                  <br>
                  I have tried to provide the necessary credits, but if you think that a relevant contribution is missing, please let me know.
                  <br>
                  No AI were harmed in creating this blog.
                  <br>
                  This is a blog, not a bakery: there are no cookies here!
                  <br>
                  The top image has been generated with a modified version Dan Gries' code, available at <a href="http://rectangleworld.com/blog/archives/538">http://rectangleworld.com</a>.
          </div>
          <br>

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="http://localhost:4000/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Data-perspectives</li>
          <li><a class="u-email" href="mailto:dataperspectivesblog@gmail.com">dataperspectivesblog@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p></p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
  <a rel="me" href="https://twitter.com/SteffPy" target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://stackoverflow.com/users/11065831/stefano" target="_blank" title="stackoverflow">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#stackoverflow"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://github.com/thestippe/" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://vis.social/@thestippe" target="_blank" title="mastodon">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#mastodon"></use>
    </svg>
  </a>
</li>
</ul>
</div>

  </div>

</footer>
</body>

  <script src="/docs/assets/javascript/scroll.js">
  </script>

</html>

